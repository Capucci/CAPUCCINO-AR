<!DOCTYPE html>
<html>
<head>
   <script>
const VERSION = "5.0.5"; 
</script>
   
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">

<script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/aframe-extras@6.1.1/dist/aframe-extras.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>

<style>
html, body {
  margin: 0;
  padding: 0;
  overflow: hidden;
  width: 100%;
  height: 100%;
  background: black;
}

a-scene {
  width: 100%;
  height: 100%;
  position: fixed;
  top: 0;
  left: 0;
}
</style>
</head>

<body>

<a-scene
  mindar-image="imageTargetSrc: Target01.mind; autoStart: true;"
  embedded
  vr-mode-ui="enabled: false"
  device-orientation-permission-ui="enabled: false"
  renderer="colorManagement: true, physicallyCorrectLights">

  <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>

  <!-- ðŸŽ¯ TARGET 0 -->
  <a-entity mindar-image-target="targetIndex: 0" id="target0">

    <a-entity
      gltf-model="Cena 01Teste.glb"
      animation-mixer
      position="0 0 0.3"
      rotation="-90 0 0"
      scale="0.7 0.7 0.7">
    </a-entity>

  </a-entity>

  <!-- ðŸŽ¯ TARGET 1 -->
  <a-entity mindar-image-target="targetIndex: 1" id="target1">

    <a-video
      src="#videoFile"
      width="1"
      height="0.6"
      position="0 0 0">
    </a-video>

  </a-entity>

  <!-- ðŸŽµ Ãudio -->
  <audio id="audioFile" preload="auto">
    <source src="AudioTrack11.mp3" type="audio/mpeg">
  </audio>

  <!-- ðŸŽ¬ VÃ­deo (oculto) -->
  <video
    id="videoFile"
    src="Video Antecipe Portugues 1.mp4"
    preload="auto"
    playsinline
    webkit-playsinline
    style="display:none">
  </video>

</a-scene>

<script>
document.addEventListener("DOMContentLoaded", function () {

  const target0 = document.querySelector("#target0");
  const target1 = document.querySelector("#target1");

  const audio = document.querySelector("#audioFile");
  const video = document.querySelector("#videoFile");

  let audioTime = 0;
  let videoTime = 0;

  // ðŸ”“ Desbloqueio obrigatÃ³rio mobile
  document.body.addEventListener("click", unlock);
  document.body.addEventListener("touchstart", unlock);

  function unlock() {
    audio.play().then(()=>{audio.pause();}).catch(()=>{});
    video.play().then(()=>{video.pause();}).catch(()=>{});
  }

  // ðŸŽµ TARGET 0
  target0.addEventListener("targetFound", () => {
    audio.currentTime = audioTime;
    audio.play();
  });

  target0.addEventListener("targetLost", () => {
    audioTime = audio.currentTime;
    audio.pause();
  });

  // ðŸŽ¬ TARGET 1
  target1.addEventListener("targetFound", () => {
    video.currentTime = videoTime;
    video.play();
  });

  target1.addEventListener("targetLost", () => {
    videoTime = video.currentTime;
    video.pause();
  });

});
</script>

</body>
</html>
